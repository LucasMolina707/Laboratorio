
<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
  <!-- =====================================================================
       CABECERA OPTIMIZADA PARA SEO (v3)
       Notas:
       - Rellena los [SEO/TODO] con datos reales del proyecto/p√°gina.
       - Los iconos se sirven desde el MISMO repo (/galeria/logo/...).
       ===================================================================== -->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <meta name="application-name" content="Ing. Lucas Learning Hub" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />

  <!-- [SEO/TODO] TITLE y DESCRIPTION con keywords -->
  <title>Ing. Lucas Molina ¬∑ Learning Hub ‚Äî Estudiante de Ingenier√≠a Inform√°tica en Colombia</title>
  <meta name="description" content="Portafolio y bit√°cora de Ing. Lucas Molina (Ing Lucas) ‚Äî estudiante de Ingenier√≠a Inform√°tica. Proyectos, tutoriales y recursos del Ing. Lucas Learning Hub en Colombia." />

  <!-- Robots y can√≥nica -->
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <link rel="canonical" href="https://hub.inglucas.com.co/">

  <!-- Se√±ales de pa√≠s/idioma -->
  <link rel="alternate" hreflang="es-co" href="https://hub.inglucas.com.co/">
  <link rel="alternate" hreflang="es" href="https://hub.inglucas.com.co/">

  <!-- ====== ICONOGRAF√çA / FAVICONS (desde el mismo repo) ====== -->
  <!-- Favicon cl√°sico -->
  <link rel="icon" href="/galeria/logo/logoinglucas.ico" sizes="any">
  <!-- SVG vectorial (modernos) -->
  <link rel="icon" type="image/svg+xml" href="/galeria/logo/logoinglucas.svg">
  <!-- PNGs en varios tama√±os para compatibilidad -->
  <link rel="icon" type="image/png" sizes="48x48" href="/galeria/logo/logoinglucas.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/galeria/logo/logoinglucas.png">
  <!-- Apple touch icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/galeria/logo/logoinglucas.png">
  <!-- Pinned tab Safari -->
  <link rel="mask-icon" href="/galeria/logo/logoinglucas.svg" color="#2563eb">
  <!-- Windows tiles -->
  <meta name="msapplication-TileColor" content="#0b1730">
  <meta name="msapplication-config" content="/browserconfig.xml"><!-- [SEO/INFO] opcional -->
  <!-- Manifest PWA (para que buscadores lean nombre/iconos) -->
  <link rel="manifest" href="/site.webmanifest">
  <!-- [SEO/INFO] El .ai no se referencia como favicon (no lo soportan). Gu√°rdalo en /galeria/logo/logoinglucas.ai para dise√±o. -->

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:locale" content="es_CO">
  <meta property="og:site_name" content="Ing. Lucas Learning Hub">
  <meta property="og:title" content="Ing. Lucas Molina ¬∑ Learning Hub">
  <meta property="og:description" content="Proyectos y recursos de Ing. Lucas Molina (Ing Lucas) en Colombia.">
  <meta property="og:url" content="https://hub.inglucas.com.co/">
  <meta property="og:image" content="/multimedia/cover-og.webp"><!-- [SEO/TODO] 1200x630, <300KB -->

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ing. Lucas Molina ¬∑ Learning Hub">
  <meta name="twitter:description" content="Portafolio, proyectos y tutoriales del Ing Lucas en Colombia.">
  <meta name="twitter:image" content="/multimedia/cover-og.webp">

  <!-- Color de la UI del navegador -->
  <meta name="theme-color" content="#0d47a1" />

  <!-- ====== DATOS ESTRUCTURADOS (JSON-LD) ====== -->
  <!-- Person + WebSite + Organization con logo (para mostrar logo en SERP) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "Person",
        "@id": "https://hub.inglucas.com.co/#lucas",
        "name": "Ing. Lucas Molina",
        "alternateName": ["Lucas Molina", "Ing Lucas", "Ing Lucas Molina", "Lucas Learning Hub", "Ing. Lucas Learning Hub"],
        "description": "Estudiante de Ingenier√≠a Inform√°tica y creador de Ing. Lucas Learning Hub en Colombia.",
        "url": "https://hub.inglucas.com.co/",
        "image": "/galeria/logo/logoinglucas.jpg",
        "sameAs": [
          "https://github.com/IngLucas",
          "https://www.linkedin.com/in/IngLucas",
          "https://instagram.com/IngLucas",
          "https://facebook.com/IngLucas"
        ],
        "nationality": "CO",
        "knowsAbout": [
          "Ingenier√≠a Inform√°tica", "Linux", "Ubuntu", "Windows", "Desarrollo web",
          "Automatizaci√≥n con scripts", "Servidores", "AppSheet", "Excel macros"
        ]
      },
      {
        "@type": "WebSite",
        "@id": "https://hub.inglucas.com.co/#website",
        "name": "Ing. Lucas Learning Hub",
        "url": "https://hub.inglucas.com.co/",
        "inLanguage": "es-CO",
        "publisher": { "@id": "https://hub.inglucas.com.co/#organization" },
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://hub.inglucas.com.co/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      },
      {
        "@type": "Organization",
        "@id": "https://hub.inglucas.com.co/#organization",
        "name": "Ing. Lucas Learning Hub",
        "url": "https://hub.inglucas.com.co/",
        "logo": {
          "@type": "ImageObject",
          "url": "/galeria/logo/logoinglucas.png"
        },
        "sameAs": [
          "https://github.com/IngLucas",
          "https://www.linkedin.com/in/IngLucas"
        ]
      }
    ]
  }
  </script>

  <!-- Breadcrumbs opcionales (rellena por p√°gina) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Inicio", "item": "https://hub.inglucas.com.co/" }
      /* [SEO/TODO] A√±ade niveles por p√°gina:
         ,{ "@type":"ListItem","position":2,"name":"Proyectos","item":"https://hub.inglucas.com.co/proyectos/" } */
    ]
  }
  </script>

  <style>
    /* =============================================================
       PALETA DE ARMON√çA (alto contraste, sin negros puros)
       ============================================================= */
    :root{
      --blue-900:#0b1730; --blue-800:#0f2346; --blue-700:#153769; --blue-600:#1c4b8c; --blue-500:#2563eb; --blue-400:#60a5fa;
      --purple-600:#7c3aed; --cyan-400:#22d3ee; --lime-400:#a3e635;
      --bg:#0e1116; --surface:#121826; --panel:#151d2c; --panel-2:#0f1722;
      --border:#263349; --soft:#0b0f16; --text:#ecf3ff; --muted:#b4c2d6;
      --accent-ring: 0 0 0 3px rgba(34,211,238,.25);
      --radius:16px; --radius-sm:12px; --shadow:0 12px 28px rgba(0,0,0,.35);
      --container:1200px; --gap:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif;
      background:linear-gradient(180deg,var(--panel-2),var(--bg)); color:var(--text)
    }
    a{color:var(--blue-400); text-decoration:none}
    .wrap{max-width:var(--container); margin:0 auto; padding:0 20px}

    /* =============================================================
       TOPBAR + ACCIONES (logo + botones a la derecha)
    ============================================================= */
    .topbar{ position:sticky; top:0; z-index:60; backdrop-filter:saturate(1.1) blur(8px); background:rgba(13,18,30,.75); border-bottom:1px solid var(--border)}
    .topbar .row{display:flex; align-items:center; gap:12px; padding:12px 0}

    .logo{
      width:36px; height:36px; border-radius:10px; display:grid; place-items:center; overflow:hidden;
      background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid rgba(96,165,250,.25)
    }
    .logo img{width:100%; height:100%; object-fit:cover; display:block}
    .brand{display:flex; flex-direction:column}
    .brand strong{font-size:16px}
    .brand span{font-size:12px; color:var(--muted)}

    .actions{ margin-left:auto; display:flex; gap:10px; align-items:center }
    .icon-btn{
      --size:40px; width:var(--size); height:var(--size); display:inline-grid; place-items:center;
      border-radius:12px; border:1.5px solid var(--blue-500);
      background:linear-gradient(180deg,#0f172a,#0b1220);
      color:#e8f1ff; cursor:pointer; transition:transform .15s ease, filter .15s ease, box-shadow .15s ease;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }
    .icon-btn:hover{ transform:translateY(-1px); filter:brightness(1.05)}
    .icon-btn:focus-visible{ outline:none; box-shadow:var(--accent-ring) }
    .icon-btn svg{ width:22px; height:22px; display:block }

    /* =============================================================
       DRAWER / MEN√ö LATERAL (derecha)
       ============================================================= */
    .drawer{ position:fixed; z-index:70; inset:0 0 0 auto; width:320px; max-width:86vw; background:linear-gradient(180deg,#0e223a,#0a1729); border-left:2px solid var(--blue-500); box-shadow:-20px 0 40px rgba(0,0,0,.45); transform:translateX(100%); transition:.25s ease transform }
    .drawer.open{transform:translateX(0)}
    .drawer .hd{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--border)}
    .drawer .bd{padding:12px 16px; display:grid; gap:16px}
    .nav-group{border:1px solid var(--border); border-radius:12px; overflow:hidden}
    .nav-group h4{margin:0; padding:10px 12px; font-size:13px; color:var(--muted); background:#111826; border-bottom:1px solid var(--border)}
    .nav{display:grid}
    .nav a{padding:12px 12px; border-top:1px solid var(--border)}
    .nav a:hover{background:rgba(37,99,235,.18)}

    /* =============================================================
       WORKSPACE
       ============================================================= */
    .workspace{padding:24px 0}
    .window{background:linear-gradient(180deg,rgba(25,31,45,.96),rgba(18,23,33,.96)); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden}
    .window-titlebar{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:10px 12px; background:linear-gradient(180deg,#1a2333,#151c29); border-bottom:1px solid var(--border)}
    .title-left{display:flex; align-items:center; gap:10px}
    .traffic{display:flex; gap:8px}
    .dot{width:12px; height:12px; border-radius:50%}
    .dot.close{background:#ff5f56}
    .dot.min{background:#ffbd2e}
    .dot.max{background:#27c93f}
    .window-title{font-size:15px; font-weight:600}
    .title-meta{font-size:12px; color:var(--muted)}
    .window-body{display:grid; grid-template-columns:1fr; gap:0}
    .pane{padding:18px; min-height:420px; background:linear-gradient(180deg,rgba(16,22,34,.95),rgba(12,16,24,.95))}

    /* Pie fijo del proyecto dentro del workspace */
    .project-note{ position:sticky; bottom:0; left:0; right:0; z-index:10; border-top:1px dashed var(--border); background:linear-gradient(180deg,rgba(20,26,36,.95),rgba(14,18,26,.95)); padding:12px 16px; color:var(--muted); font-size:13px; display:flex; gap:10px; align-items:flex-start }
    .project-note .tag{padding:2px 8px; border-radius:999px; border:1px solid var(--border); font-size:12px; background:rgba(37,99,235,.10); color:var(--text)}

    /* =============================================================
       FOOTER
       ============================================================= */
    footer{border-top:1px solid var(--border); color:var(--muted); padding:22px 0; font-size:13px; background:linear-gradient(180deg,#0f1624,#0c121e)}
    .foot{display:grid; gap:12px}
    @media(min-width:860px){.foot{grid-template-columns:1fr auto}}
    .socials{display:flex; gap:10px; flex-wrap:wrap}
    .chip{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid var(--border); background:rgba(18,23,31,.8); color:#eef5ff}

    /* =============================================================
       BANNER COOKIES (alto contraste)
       ============================================================= */
    .consent{ display:none; position:fixed; inset:auto 0 16px 0; z-index:1000; }
    .consent .card{ max-width:960px; margin:0 auto; background:#0f172a; color:#e6efff; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,.28); padding:16px 18px; border:1px solid rgba(96,165,250,.25); }
    .consent .row{ display:flex; gap:16px; align-items:flex-start; }
    .consent p{ margin:0; line-height:1.5 }
    .consent .actions{ margin-left:auto; display:flex; gap:10px; flex-wrap:wrap; }
    .btn{padding:8px 12px; border-radius:10px; border:1px solid rgba(96,165,250,.35); background:rgba(37,99,235,.15); color:#eaf2ff; cursor:pointer}
    .btn.primary{ background:var(--blue-500); border-color:transparent; color:white; }
    .btn:hover{ filter:brightness(1.05); }

    /* =============================================================
       PANEL DE COMENTARIOS (izquierda)
       ============================================================= */
    .comments-drawer{ position:fixed; z-index:80; inset:0 auto 0 0; width:420px; max-width:92vw; background:linear-gradient(180deg,#0b1626,#0a1220); border-right:2px solid var(--blue-500); box-shadow:20px 0 40px rgba(0,0,0,.45); transform:translateX(-100%); transition:.25s ease transform; display:flex; flex-direction:column; }
    .comments-drawer.open{ transform:translateX(0) }
    .comments-drawer .hd{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 14px; border-bottom:1px solid var(--border)}
    .comments-drawer .bd{padding:10px 12px; overflow:auto; height:100%}
  </style>
</head>

<body>
  <!-- =============================================================
       TOPBAR con acciones: Comentarios + Men√∫ (derecha)
       ============================================================= -->
  <div class="topbar">
    <div class="wrap row">
      <!-- Logo usando rutas del MISMO repo -->
      <a class="logo" href="/" aria-label="Inicio ¬∑ Ing. Lucas Learning Hub">
        <picture>
          <source srcset="/galeria/logo/logoinglucas.svg" type="image/svg+xml">
          <img src="/galeria/logo/logoinglucas.png" alt="Logo Ing. Lucas" width="36" height="36" loading="eager" fetchpriority="high">
        </picture>
      </a>

      <div class="brand">
        <!-- [SEO/TODO] Marca + claim -->
        <strong>Ing. Lucas Learning Hub</strong>
        <span>Plantilla Base</span>
      </div>

      <div class="actions">
        <!-- Bot√≥n: abrir comentarios (icono solo) -->
        <button class="icon-btn" id="openComments" title="Abrir comentarios" aria-label="Abrir comentarios" aria-expanded="false" aria-controls="commentsDrawer">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20 2H4a2 2 0 0 0-2 2v16l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"/></svg>
        </button>
        <!-- Bot√≥n: abrir men√∫ (hover/click en desktop) -->
        <button class="icon-btn" id="openDrawer" title="Abrir men√∫" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="drawer">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- =============================================================
       DRAWER / MEN√ö LATERAL (derecha)
       ============================================================= -->
  <aside class="drawer" id="drawer" aria-label="Men√∫ de navegaci√≥n" aria-hidden="true">
    <div class="hd">
      <strong>Navegaci√≥n</strong>
      <button class="btn" id="closeDrawer" aria-label="Cerrar">Cerrar ‚úï</button>
    </div>
    <div class="bd">
      <div class="nav-group">
        <h4>P√°ginas</h4>
        <nav class="nav" id="nav-pages"></nav>
      </div>
      <div class="nav-group">
        <h4>Ventanas / Proyectos</h4>
        <nav class="nav" id="nav-projects"></nav>
      </div>
    </div>
  </aside>

  <!-- =============================================================
       PANEL DE COMENTARIOS (izquierda)
       ============================================================= -->
  <aside class="comments-drawer" id="commentsDrawer" aria-label="Comentarios" aria-hidden="true">
    <div class="hd">
      <strong>Comentarios</strong>
      <button class="btn" id="closeComments" aria-label="Cerrar comentarios">Cerrar ‚úï</button>
    </div>
    <div class="bd">
      <!-- Utterances se inyecta aqu√≠ on-demand -->
      <div id="commentsMount" aria-live="polite"></div>
    </div>
  </aside>

  <!-- =============================================================
       CONTENIDO PRINCIPAL
       ============================================================= -->
  <div class="wrap workspace">
    <section class="window" role="region" aria-label="Contenido principal">
      <div class="window-titlebar">
        <div class="title-left">
          <div class="traffic" aria-hidden="true">
            <span class="dot close"></span>
            <span class="dot min"></span>
            <span class="dot max"></span>
          </div>
          <div>
            <div class="window-title">Inicio ¬∑ Ing. Lucas Learning Hub</div>
            <div class="title-meta">Ruta > Portada ¬∑ Estado</div>
          </div>
        </div>
        <div class="title-right"></div>
      </div>

      <div class="window-body">
        <section class="pane">
          <!-- =====================================================
               [INTEGRACI√ìN / INTEGRATION] ‚Äì Contenido agregado SOLO dentro de <section class="pane">
               ES: Se integra la herramienta "Generador de Prompt Maestro" totalmente encapsulada.
               EN: "Master Prompt Generator" tool integrated, fully scoped.
               Reglas / Rules: no se toca header/drawer/utterances/footer/cookies; IDs √∫nicos; estilos en [data-scope="ilh"] o .ilh-*.
               ===================================================== -->

          <!-- App: Generador de Prompt Maestro -->
          <main class="ilh-wrap" data-scope="ilh" id="app">
            <header class="mb-0">
              <h1>üß© Generador de Prompt Maestro</h1>
              <p class="ilh-sub">Integra contenido en tu plantilla sin romper header/drawer/utterances/footer/cookies. Marca opciones, genera y copia.</p>
            </header>

            <!-- 1) Entradas base -->
            <section class="ilh-card" aria-labelledby="ilh-step1">
              <h2 id="ilh-step1" class="mb-0">1) Entradas base</h2>
              <p class="ilh-hint mt-2">ES: Pega tu plantilla y el contenido del proyecto. | EN: Paste your base template and project content.</p>
              <div class="ilh-grid cols-2 mt-3">
                <div>
                  <label for="template-input">Plantilla HTML base</label>
                  <textarea id="template-input" placeholder="Pega aqu√≠ tu plantilla HTML completa..." aria-describedby="hint-template"></textarea>
                  <p id="hint-template" class="ilh-hint mt-2">No se modificar√° fuera del selector permitido.</p>
                </div>
                <div>
                  <label for="content-input">Contenido del proyecto (HTML o texto)</label>
                  <textarea id="content-input" placeholder="Pega aqu√≠ tu contenido HTML o texto..." aria-describedby="hint-content"></textarea>
                  <div class="ilh-row mt-2">
                    <div>
                      <label for="content-type">Tipo de contenido</label>
                      <select id="content-type">
                        <option value="html" selected>HTML</option>
                        <option value="text">Texto (convertir a HTML limpio)</option>
                      </select>
                    </div>
                    <div>
                      <label for="structure">¬øEstructura acad√©mica?</label>
                      <select id="structure">
                        <option value="yes">S√≠</option>
                        <option value="no" selected>No</option>
                      </select>
                    </div>
                    <div>
                      <label for="insertion-selector">Selector de inserci√≥n</label>
                      <input id="insertion-selector" type="text" placeholder='Ej.: section.pane' value="section.pane" />
                      <p class="ilh-hint mt-2">ES: Selector CSS exacto donde se permite modificar. | EN: Exact allowed CSS edit scope.</p>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- 2) Contexto del encargo -->
            <section class="ilh-card" aria-labelledby="ilh-step2">
              <h2 id="ilh-step2" class="mb-0">2) Contexto del encargo</h2>
              <div class="ilh-grid cols-2 mt-3">
                <div>
                  <label for="goal">Objetivo del prompt</label>
                  <input id="goal" type="text" placeholder="Ej.: Integrar un proyecto HTML en la plantilla sin romper el layout">
                  <label for="audience" class="mt-2">Audiencia</label>
                  <input id="audience" type="text" placeholder="Ej.: Usuarios no t√©cnicos, equipo acad√©mico, etc.">
                  <div class="ilh-row mt-2">
                    <div>
                      <label for="tone">Tono/estilo</label>
                      <select id="tone">
                        <option>Formal docente</option>
                        <option selected>Directo y t√©cnico</option>
                        <option>Marketing persuasivo</option>
                        <option>Neutro</option>
                      </select>
                    </div>
                    <div>
                      <label for="format">Formato de salida</label>
                      <select id="format">
                        <option selected>HTML completo</option>
                        <option>Markdown</option>
                        <option>Texto plano</option>
                        <option>Lista numerada</option>
                        <option>Tabla</option>
                      </select>
                    </div>
                    <div>
                      <label for="length">Longitud esperada</label>
                      <select id="length">
                        <option>Breve</option>
                        <option>Media</option>
                        <option selected>Larga</option>
                        <option>L√≠mite 800 palabras</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div>
                  <label for="positive-example">Mini ejemplo de lo deseado (opcional)</label>
                  <textarea id="positive-example" placeholder="Ej.: Integrar secci√≥n con H2, respetar clases y comentar ES/EN..."></textarea>
                  <label for="negative-example" class="mt-2">Qu√© NO hacer (opcional)</label>
                  <textarea id="negative-example" placeholder="Ej.: No eliminar el banner de cookies ni mover el bot√≥n de comentarios..."></textarea>
                </div>
              </div>
            </section>

            <!-- 3) Reglas duras -->
            <section class="ilh-card" aria-labelledby="ilh-step3">
              <h2 id="ilh-step3" class="mb-0">3) Reglas duras (marca con palomita)</h2>
              <div class="ilh-grid cols-2 mt-3">
                <div class="ilh-checks">
                  <label><input type="checkbox" class="hr" value="No modificar ni eliminar header, men√∫ lateral (drawer), bot√≥n de comentarios (utterances), footer ni banner de cookies." checked> No tocar header/drawer/utterances/footer/cookies.</label>
                  <label><input type="checkbox" class="hr" value="Mantener la uniformidad del sitio (clases y animaciones existentes)." checked> Mantener clases/animaciones existentes.</label>
                  <label><input type="checkbox" class="hr" value="Encapsular nuevos estilos con prefijo .ilh- o dentro de [data-scope=&quot;ilh&quot;]." checked> Encapsular estilos con <code>.ilh-</code> o <code>[data-scope=&quot;ilh&quot;]</code>.</label>
                  <label><input type="checkbox" class="hr" value="Garantizar HTML v√°lido (W3C) y accesible; usar IDs √∫nicos y alt en im√°genes." checked> HTML v√°lido + accesibilidad + IDs √∫nicos.</label>
                  <label><input type="checkbox" class="hr" value="Compatibilidad responsive en PC y m√≥viles sin librer√≠as externas nuevas." checked> Responsive sin librer√≠as nuevas.</label>
                </div>
                <div class="ilh-checks">
                  <label><input type="checkbox" class="hr" value="Evitar sobrescribir variables globales o estilos base del sitio." checked> No sobrescribir variables/globales.</label>
                  <label><input type="checkbox" class="hr" value="Comentarios biling√ºes ES/EN en el c√≥digo entregado." checked> Comentarios biling√ºes ES/EN.</label>
                  <label><input type="checkbox" class="hr" value="Sanitizar/escapar scripts dentro del contenido si viene como texto." checked> Sanitizar scripts en contenido de texto.</label>
                  <label><input type="checkbox" class="hr" value="No insertar iframes externos sin aviso; marcar como &quot;requiere revisi√≥n&quot;." checked> Iframes externos: marcar ‚Äúrequiere revisi√≥n‚Äù.</label>
                  <label><input type="checkbox" class="hr" value="Evitar estilos inline salvo justificaci√≥n expl√≠cita." checked> Evitar estilos inline.</label>
                </div>
              </div>
              <p class="ilh-hint mt-2">ES: Estas reglas se pegan tal cual en el prompt. | EN: These rules are copied verbatim into the prompt.</p>
            </section>

            <!-- 4) Integraciones -->
            <section class="ilh-card" aria-labelledby="ilh-step4">
              <h2 id="ilh-step4" class="mb-0">4) Integraciones de la plantilla base (animaciones)</h2>
              <p class="ilh-hint mt-2">ES: Indica si se debe garantizar la integraci√≥n de los botones y sus animaciones originales. | EN: Indicate whether to guarantee original buttons + animations integration.</p>
              <div class="ilh-checks mt-2">
                <label><input type="checkbox" id="integrate-menu" checked> Integrar <strong>bot√≥n de men√∫ (drawer)</strong> con su animaci√≥n de la plantilla base.</label>
                <label><input type="checkbox" id="integrate-comments" checked> Integrar <strong>bot√≥n de comentarios (utterances)</strong> con sus animaciones de la plantilla base.</label>
              </div>
            </section>

            <!-- 5) Presets y acciones -->
            <section class="ilh-card" aria-labelledby="ilh-step5">
              <h2 id="ilh-step5" class="mb-0">5) Presets y acciones</h2>
              <div class="ilh-row mt-2">
                <div class="ilh-row" style="flex:2">
                  <div>
                    <label for="preset">Preset</label>
                    <select id="preset">
                      <option value="custom" selected>‚Äî Personalizado ‚Äî</option>
                      <option value="html_puro">Insertar HTML puro</option>
                      <option value="informe_academico">Informe acad√©mico</option>
                      <option value="pagina_marketing">P√°gina de marketing r√°pida</option>
                    </select>
                  </div>
                  <div>
                    <label for="preset-name">Nombre para guardar el preset</label>
                    <input id="preset-name" type="text" placeholder="Ej.: Trabajo SO v1"/>
                  </div>
                </div>
                <div class="ilh-actions" role="group" aria-label="Acciones del generador">
                  <button id="apply-preset" class="secondary">Aplicar preset</button>
                  <button id="save-preset" class="secondary">Guardar preset</button>
                  <button id="generate-btn">üî® Generar prompt</button>
                  <button id="copy-prompt-btn" class="ok" style="display:none;">üìã Copiar prompt</button>
                  <span id="copy-status" class="ilh-ok" style="display:none;" aria-live="polite">‚úÖ Copiado</span>
                </div>
              </div>
              <p class="ilh-hint mt-2">ES: Los presets se guardan en el <em>localStorage</em> del navegador. | EN: Presets persist in browser localStorage.</p>
            </section>

            <!-- 6) Vista previa -->
            <section class="ilh-card" aria-labelledby="ilh-step6">
              <h2 id="ilh-step6" class="mb-0">6) Vista previa del prompt</h2>
              <div id="prompt-preview" class="ilh-preview mt-2" role="region" aria-label="Vista previa">Genera el prompt para verlo aqu√≠‚Ä¶</div>
            </section>

            <!-- 7) Checklist autom√°tico -->
            <section class="ilh-card" aria-labelledby="ilh-step7">
              <h2 id="ilh-step7" class="mb-0">7) Checklist autom√°tico</h2>
              <ul id="auto-checklist" class="mt-2" aria-live="polite">
                <li>1) Plantilla presente: <span id="chk-template" class="ilh-chip">pendiente</span></li>
                <li>2) Contenido presente: <span id="chk-content" class="ilh-chip">pendiente</span></li>
                <li>3) Selector de inserci√≥n: <span id="chk-selector" class="ilh-chip">pendiente</span></li>
                <li>4) Reglas duras marcadas: <span id="chk-rules" class="ilh-chip">pendiente</span></li>
                <li>5) Contexto del encargo: <span id="chk-context" class="ilh-chip">pendiente</span></li>
              </ul>
            </section>
          </main>

          <!-- ===================== ESTILOS ENCAPSULADOS (.ilh- / [data-scope="ilh"]) =====================
               ES: Todos los selectores de tipo (h1, label, button, inputs, etc.) est√°n limitados al scope.
               EN: All type selectors (h1, label, button, inputs, etc.) are constrained to the scope.
          -->
          <style>
            /* Variables locales ‚Äî Local CSS variables */
            [data-scope="ilh"]{
              --bg:#0b1220;
              --card:#111a2b;
              --ink:#e8f0ff;
              --muted:#9bb0d1;
              --accent:#4cc9f0;
              --ok:#2bd164;
              --bad:#ff5964;
              --border:#23314e;

              --space-1:8px;
              --space-2:12px;
              --space-3:16px;
              --space-4:20px;
              --space-5:24px;
              --radius:16px;
              --radius-sm:10px;
              --field-bg:#0e1728;

              box-sizing:border-box;
              color:var(--ink);
              background:var(--bg);
              min-height:100%;
              padding:var(--space-5);
              font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
            }
            [data-scope="ilh"] *, [data-scope="ilh"] *::before, [data-scope="ilh"] *::after{ box-sizing:inherit; }

            .ilh-wrap{max-width:min(1200px,100%); margin-inline:auto}
            [data-scope="ilh"] h1{margin:0 0 var(--space-1)}
            [data-scope="ilh"] .ilh-sub{color:var(--muted); margin:0 0 var(--space-4)}

            .ilh-card{
              background:var(--card);
              border:1px solid var(--border);
              border-radius:var(--radius);
              padding:var(--space-4);
            }

            .ilh-grid{display:grid; gap:var(--space-4)}
            @media (min-width:960px){ .ilh-grid.cols-2{ grid-template-columns:1fr 1fr } }

            /* Controles (scoped) */
            [data-scope="ilh"] label{font-weight:600; display:block; margin:.35rem 0 .25rem}
            [data-scope="ilh"] input[type="text"],
            [data-scope="ilh"] input[type="search"],
            [data-scope="ilh"] select,
            [data-scope="ilh"] textarea{
              width:100%; padding:12px 14px; background:var(--field-bg); color:var(--ink);
              border:1px solid var(--border); border-radius:var(--radius-sm); line-height:1.4;
              font-family:ui-monospace, Menlo, Consolas, monospace;
            }
            [data-scope="ilh"] textarea{min-height:180px; resize:vertical}
            .ilh-row{display:flex; gap:var(--space-3); flex-wrap:wrap}
            .ilh-row > *{flex:1 1 220px}

            .ilh-checks{display:grid; gap:var(--space-2)}
            .ilh-checks label{display:flex; gap:10px; align-items:flex-start; font-weight:500}

            .ilh-actions{display:flex; gap:var(--space-3); flex-wrap:wrap; align-items:center}
            [data-scope="ilh"] button{
              background:var(--accent); color:#071120; border:0; border-radius:var(--radius-sm);
              padding:12px 16px; font-weight:700; cursor:pointer; min-height:44px;
            }
            [data-scope="ilh"] button.secondary{background:#16233a; color:var(--ink); border:1px solid var(--border)}
            [data-scope="ilh"] button.ok{background:var(--ok); color:#06210f}
            [data-scope="ilh"] button:focus-visible{outline:2px solid #8fd3ff; outline-offset:2px}

            .ilh-hint{font-size:.92rem; color:var(--muted)}
            .ilh-preview{
              background:#0a1426; border:1px dashed var(--border); border-radius:var(--radius);
              padding:var(--space-3); white-space:pre-wrap; overflow:auto; max-height:55vh;
            }
            .ilh-chip{background:#12203a; color:var(--muted); padding:4px 8px; border-radius:8px; font-size:.82rem}
            .ilh-ok{color:var(--ok); font-weight:700}

            /* Utilidades */
            [data-scope="ilh"] ul{margin:0; padding-left:1.1rem}
            .mt-2{margin-top:var(--space-2)}
            .mt-3{margin-top:var(--space-3)}
            .mt-4{margin-top:var(--space-4)}
            .mb-0{margin-bottom:0}
          </style>

          <!-- ===================== JS ENCAPSULADO (IIFE) =====================
               ES: Todo el comportamiento del generador est√° aislado para no interferir con la plantilla.
               EN: Generator behavior is isolated so it doesn‚Äôt interfere with the base template.
          -->
          <script>
            (function(){
              // ===============================
              // Utilidades b√°sicas (scoped)
              // ===============================
              const $  = s => document.querySelector(s);
              const $$ = s => Array.from(document.querySelectorAll(s));

              function convertTextToHTML(text){
                // ES: Convierte texto simple en p√°rrafos HTML seguros
                // EN: Convert plain text to safe HTML paragraphs
                const safe = text.replace(/</g,'&lt;').replace(/>/g,'&gt;').trim();
                if(!safe) return '<section data-scope="ilh"></section>';
                const chunks = safe.split(/\n{2,}/).map(p => `<p>${p.replace(/\n/g,'<br/>')}</p>`);
                return `<section data-scope="ilh">\n${chunks.join('\n')}\n</section>`;
              }

              function wrapAcademicStructure(contentHTML){
                // ES: Envoltura opcional con secciones acad√©micas
                // EN: Optional wrapper with academic sections
                return `
<section class="pane" data-scope="ilh">
  <article>
    <h2>Introducci√≥n</h2>
    <p><!-- ES: Agrega una introducci√≥n; EN: Add an introduction --></p>

    <h2>Desarrollo</h2>
    ${contentHTML}

    <h2>Conclusiones</h2>
    <p><!-- ES: Sintetiza puntos clave; EN: Summarize key points --></p>

    <h2>Referencias</h2>
    <p><!-- ES: A√±ade referencias (APA breve); EN: Add brief APA references --></p>
  </article>
</section>`.trim();
              }

              function getCheckedRules(){
                return $$('.hr').filter(i=>i.checked).map(i=>i.value);
              }
              function short(v, fb='‚Äî'){ return (v||'').trim() ? v.trim() : fb; }

              // ===============================
              // Checklist en vivo
              // ===============================
              function updateChecklist(){
                $('#chk-template').textContent = $('#template-input').value.trim() ? 'ok' : 'pendiente';
                $('#chk-content').textContent  = $('#content-input').value.trim() ? 'ok' : 'pendiente';
                $('#chk-selector').textContent = $('#insertion-selector').value.trim() ? 'ok' : 'pendiente';
                $('#chk-rules').textContent    = getCheckedRules().length >= 3 ? 'ok' : 'pendiente';
                const ctxOK = $('#goal').value.trim() || $('#audience').value.trim();
                $('#chk-context').textContent  = ctxOK ? 'ok' : 'pendiente';
              }
              ['template-input','content-input','insertion-selector','goal','audience'].forEach(id=>{
                const el = document.getElementById(id);
                el && el.addEventListener('input', updateChecklist);
              });
              $$('.hr').forEach(c=>c.addEventListener('change', updateChecklist));
              updateChecklist();

              // ===============================
              // Presets
              // ===============================
              const builtInPresets = {
                html_puro: {
                  structure:'no', tone:'Directo y t√©cnico', format:'HTML completo', length:'Breve',
                  rules:[
                    'Mantener la uniformidad del sitio (clases y animaciones existentes).',
                    'Encapsular nuevos estilos con prefijo .ilh- o dentro de [data-scope="ilh"].',
                    'Garantizar HTML v√°lido (W3C) y accesible; usar IDs √∫nicos y alt en im√°genes.'
                  ],
                  integrates:{menu:true, comments:false}
                },
                informe_academico: {
                  structure:'yes', tone:'Formal docente', format:'HTML completo', length:'Larga',
                  rules:[
                    'No modificar ni eliminar header, men√∫ lateral (drawer), bot√≥n de comentarios (utterances), footer ni banner de cookies.',
                    'Comentarios biling√ºes ES/EN en el c√≥digo entregado.',
                    'Evitar sobrescribir variables globales o estilos base del sitio.'
                  ],
                  integrates:{menu:true, comments:true}
                },
                pagina_marketing: {
                  structure:'no', tone:'Marketing persuasivo', format:'HTML completo', length:'Media',
                  rules:[
                    'Mantener la uniformidad del sitio (clases y animaciones existentes).',
                    'No insertar iframes externos sin aviso; marcar como "requiere revisi√≥n".',
                    'Evitar estilos inline salvo justificaci√≥n expl√≠cita.'
                  ],
                  integrates:{menu:true, comments:false}
                }
              };

              function applyPresetData(p){
                if(!p) return;
                $('#structure').value = p.structure || 'no';
                $('#tone').value      = p.tone || 'Neutro';
                $('#format').value    = p.format || 'HTML completo';
                $('#length').value    = p.length || 'Media';
                // Reglas
                $$('.hr').forEach(c=>c.checked=false);
                (p.rules||[]).forEach(v=>{
                  const box = $$('.hr').find(c=>c.value===v);
                  if(box) box.checked = true;
                });
                // Integraciones
                $('#integrate-menu').checked     = !!(p.integrates && p.integrates.menu);
                $('#integrate-comments').checked = !!(p.integrates && p.integrates.comments);
                updateChecklist();
              }

              function saveCustomPreset(name){
                if(!name || !name.trim()){ alert('Pon un nombre para el preset.'); return; }
                const data = {
                  structure: $('#structure').value,
                  tone: $('#tone').value,
                  format: $('#format').value,
                  length: $('#length').value,
                  rules: getCheckedRules(),
                  integrates: {
                    menu: $('#integrate-menu').checked,
                    comments: $('#integrate-comments').checked
                  }
                };
                localStorage.setItem('ilh-preset-'+name, JSON.stringify(data));
                alert('Preset guardado: ' + name);
              }
              function loadCustomPreset(name){
                const raw = localStorage.getItem('ilh-preset-'+name);
                if(!raw){ alert('No existe un preset con ese nombre.'); return; }
                applyPresetData(JSON.parse(raw));
              }

              $('#apply-preset')?.addEventListener('click', ()=>{
                const val = $('#preset').value;
                if(val==='custom'){
                  const name = prompt('Nombre del preset a cargar (guardado por ti):');
                  if(name){ loadCustomPreset(name); }
                }else{
                  applyPresetData(builtInPresets[val]);
                }
              });
              $('#save-preset')?.addEventListener('click', ()=>{
                const name = $('#preset-name').value || prompt('Nombre para el preset:');
                if(name){ saveCustomPreset(name); }
              });

              // ===============================
              // Generaci√≥n del prompt
              // ===============================
              let lastPrompt = '';

              function buildPrompt(){
                const template = $('#template-input').value;
                const contentRaw = $('#content-input').value;
                const contentType = $('#content-type').value;
                const structure = $('#structure').value;
                const insertionSelector = $('#insertion-selector').value;

                const goal = $('#goal').value;
                const audience = $('#audience').value;
                const tone = $('#tone').value;
                const format = $('#format').value;
                const length = $('#length').value;
                const posEx = $('#positive-example').value;
                const negEx = $('#negative-example').value;

                const integrateMenu = $('#integrate-menu').checked;
                const integrateComments = $('#integrate-comments').checked;

                // Validaciones b√°sicas
                if(!template.trim()){ alert('Falta la plantilla base.'); return ''; }
                if(!contentRaw.trim()){ alert('Falta el contenido del proyecto.'); return ''; }
                if(!insertionSelector.trim()){ alert('Falta el selector de inserci√≥n.'); return ''; }

                // Integraci√≥n de contenido
                let integratedContent = (contentType === 'text') ? convertTextToHTML(contentRaw) : contentRaw;
                if(structure === 'yes'){
                  integratedContent = wrapAcademicStructure(integratedContent);
                }

                const hardRules = getCheckedRules().slice();
                if(integrateMenu){
                  hardRules.push('Mantener y/o reconectar el bot√≥n de men√∫ (drawer) con su animaci√≥n original de la plantilla base.');
                }
                if(integrateComments){
                  hardRules.push('Mantener y/o reconectar el bot√≥n de comentarios (utterances) con sus animaciones originales de la plantilla base.');
                }
                const hardRulesUnique = [...new Set(hardRules)];
                const hardRulesSummary = hardRulesUnique.length ? '‚Ä¢ ' + hardRulesUnique.join('\n‚Ä¢ ') : '‚Äî';

                const opcionesSel = [
                  `Estructura acad√©mica: ${structure === 'yes' ? 'S√≠ / Yes' : 'No'}`,
                  `Tipo de contenido: ${contentType === 'text' ? 'Texto (convertir a HTML)' : 'HTML directo'}`,
                  `Integraci√≥n bot√≥n de men√∫ (drawer + animaci√≥n): ${integrateMenu ? 'S√≠ / Yes' : 'No'}`,
                  `Integraci√≥n bot√≥n de comentarios (utterances + animaciones): ${integrateComments ? 'S√≠ / Yes' : 'No'}`
                ].join('\n- ');

                const prompt =
`üìù Prompt Maestro para integraci√≥n de contenido en plantilla base
________________________________________
Prop√≥sito / Purpose:
- ES: ${short(goal,'Integrar contenido en plantilla base sin romper la estructura.')}
- EN: ${short(goal,'Integrate project content into the base template without breaking the layout.')}

Audiencia / Audience: ${short(audience,'Mixta / General')}
Tono / Tone: ${tone}
Formato de salida / Output format: ${format}
Longitud / Length: ${length}
Selector de inserci√≥n permitido / Allowed insertion selector: "${insertionSelector}"

‚öôÔ∏è Condiciones obligatorias (no negociables) / Hard rules:
${hardRulesSummary}

Notas de calidad / Quality constraints:
- ES: Mantener accesibilidad (IDs √∫nicos, alt en im√°genes); conservar clases/animaciones existentes; no sobrescribir variables globales; evitar estilos inline salvo justificaci√≥n; sanitizar scripts si el contenido viene como texto; iframes externos: marcar "requiere revisi√≥n".
- EN: Keep accessibility (unique IDs, alt on images); preserve existing classes/animations; do not override global variables; avoid inline styles unless justified; sanitize scripts if content comes as text; external iframes: mark as "requires review".

Zonas de edici√≥n / Edit scopes:
- ES: Solo modificar el contenido dentro del selector indicado. Ning√∫n otro bloque debe ser alterado.
- EN: Only modify content within the specified selector. No other block must be changed.

üîß Opciones seleccionadas / Selected options:
- ${opcionesSel}

‚úÖ Checklist que debes confirmar antes de devolver / Must confirm before delivering:
1) Header, drawer, utterances, footer y cookies intactos.
2) Inserci√≥n realizada √öNICAMENTE en "${insertionSelector}".
3) HTML v√°lido y accesible; sin IDs duplicados.
4) Estilos nuevos encapsulados (.ilh- o [data-scope="ilh"]).
5) Responsive funcional en PC y m√≥viles.
6) Comentarios ES/EN a√±adidos.
${integrateMenu ? '7) El bot√≥n de men√∫ (drawer) mantiene su animaci√≥n y funcionalidad originales.' : ''}
${integrateComments ? '8) El bot√≥n de comentarios (utterances) mantiene sus animaciones y funcionalidad originales.' : ''}

Ejemplo positivo (opcional) / Positive example (optional):
${short(posEx, '‚Äî')}

Qu√© NO hacer (opcional) / What NOT to do (optional):
${short(negEx, '‚Äî')}

üìÑ Contenido a integrar / Content to integrate:
${integratedContent}

üìÅ Plantilla HTML base / Base template:
${template}
`;
                return prompt;
              }

              // Eventos
              $('#generate-btn')?.addEventListener('click', ()=>{
                const p = buildPrompt();
                if(!p) return;
                lastPrompt = p;
                const prev = $('#prompt-preview');
                prev.textContent = p;
                $('#copy-prompt-btn').style.display = 'inline-block';
                prev.focus?.();
              });
              $('#copy-prompt-btn')?.addEventListener('click', ()=>{
                if(!lastPrompt){ alert('Primero, genera el prompt.'); return; }
                navigator.clipboard.writeText(lastPrompt).then(()=>{
                  const el = $('#copy-status');
                  el.style.display = 'inline-block';
                  setTimeout(()=> el.style.display='none', 1600);
                });
              });
            })();
          </script>
          <!-- =================== FIN INTEGRACI√ìN (scope: [data-scope="ilh"]) =================== -->
        </section>

        <!-- Pie del proyecto dentro del workspace (INTACTO / UNCHANGED) -->
        <footer class="project-note" aria-label="Nota del proyecto">
          <span class="tag">üß© Proyecto</span>
          <div>
            <!-- [UI/TODO] Edita t√≠tulo y nota fija del proyecto -->
            <strong id="projectTitle">[TOCAR] T√≠tulo breve del proyecto</strong>
            <div id="projectNote">[TOCAR] Nota fija del proyecto: objetivos, pendientes o mini changelog.</div>
          </div>
        </footer>
      </div>
    </section>
  </div>

  <!-- =============================================================
       FOOTER GLOBAL
       ============================================================= -->
  <footer>
    <div class="wrap foot">
      <div>
        <div class="socials">
          <a class="chip" href="https://facebook.com/IngLucas" target="_blank" rel="noopener" aria-label="Facebook" title="Facebook">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22 12.06C22 6.5 17.52 2 12 2S2 6.5 2 12.06c0 5.01 3.66 9.16 8.44 9.94v-7.03H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.88 3.77-3.88 1.09 0 2.24.2 2.24.2v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.86h2.77l-.44 2.91h-2.33V22c4.78-.78 8.44-4.93 8.44-9.94z"/></svg>
          </a>
          <a class="chip" href="https://instagram.com/IngLucas" target="_blank" rel="noopener" aria-label="Instagram" title="Instagram">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 0 5-5zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7zm5 3.5a5.5 5.5 0 1 1 0 11.001 5.5 5.5 0 0 1 0-11zM17.5 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.5 2a3.5 3.5 0 1 0 0 7.001A3.5 3.5 0 0 0 12 8z"/></svg>
          </a>
          <a class="chip" href="https://github.com/IngLucas" target="_blank" rel="noopener" aria-label="GitHub" title="GitHub">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2.17c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.1-.75.09-.74.09-.74 1.22.09 1.87 1.25 1.87 1.25 1.08 1.86 2.83 1.32 3.52 1.01.11-.79.42-1.32.76-1.62-2.67-.31-5.48-1.34-5.48-5.95 0-1.31.47-2.38 1.24-3.22-.12-.31-.54-1.57.12-3.27 0 0 1.01-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.66 1.7.24 2.96.12 3.27.77.84 1.23 1.91 1.23 3.22 0 4.62-2.82 5.64-5.5 5.95.43.37.81 1.1.81 2.22v3.29c0 .32.22.7.83.58A12 12 0 0 0 12 .5z"/></svg>
          </a>
          <a class="chip" href="https://www.linkedin.com/in/IngLucas" target="_blank" rel="noopener" aria-label="LinkedIn" title="LinkedIn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20.45 20.45h-3.55v-5.6c0-1.34-.03-3.07-1.87-3.07-1.88 0-2.17 1.46-2.17 2.97v5.7H9.31V9h3.41v1.56h.05c.47-.9 1.63-1.85 3.35-1.85 3.59 0 4.25 2.36 4.25 5.42v6.32zM5.34 7.43a2.06 2.06 0 1 1 0-4.12 2.06 2.06 0 0 1 0 4.12zM7.12 20.45H3.56V9h3.56v11.45z"/></svg>
          </a>
          <a class="chip" href="#" id="manageConsent">Preferencias de cookies</a>
        </div>
        <div style="margin-top:10px"><a href="politicas-privacidad.html">Pol√≠ticas de Privacidad</a></div>
      </div>
      <div>
        ¬© <span id="y"></span> <strong>IngLucas</strong> ¬∑ Ing. Lucas Learning Hub ¬∑ Colombia
        <div id="custom-text" style="margin-top:8px; font-size:0.92em; opacity:.85;"><em>‚Äî [TOCAR/EDIT] Mensaje breve de pie de p√°gina / Short footer note.</em></div>
      </div>
    </div>
  </footer>

  <!-- =============================================================
       BANNER COOKIES (alto contraste)
       ============================================================= -->
  <div class="consent" id="consent" role="dialog" aria-live="polite" aria-label="Preferencias de cookies">
    <div class="card">
      <div class="row">
        <p>
          Usamos <strong>cookies esenciales</strong> para que el sitio funcione correctamente y, con tu permiso,
          <strong>cookies anal√≠ticas</strong> para entender el uso y mejorar la experiencia.
          Puedes cambiar tu elecci√≥n en <em>‚ÄúPreferencias de cookies‚Äù</em>.
          Consulta la <a href="politicas-privacidad.html" target="_self">Pol√≠tica de Privacidad</a>.
        </p>
        <div class="actions">
          <button class="btn" id="deny">Rechazar</button>
          <button class="btn primary" id="allow">Aceptar</button>
        </div>
      </div>
    </div>
  </div>

  <noscript>
    <div style="position:fixed;left:0;right:0;bottom:0;background:#0f172a;color:#e6efff;border-top:1px solid #243b64;padding:10px 14px;font:14px/1.4 system-ui">
      Este sitio utiliza cookies esenciales. Para anal√≠ticas necesitas habilitar JavaScript o dar consentimiento desde ‚ÄúPreferencias de cookies‚Äù.
    </div>
  </noscript>

  <script>
    // A√±o
    document.getElementById('y').textContent = new Date().getFullYear();

    // ============================================================
    // Helpers de accesibilidad / estado
    // ============================================================
    const qs = sel => document.querySelector(sel);
    const $drawer = qs('#drawer');
    const $comments = qs('#commentsDrawer');
    const $btnDrawer = qs('#openDrawer');
    const $btnComments = qs('#openComments');

    const isDesktop = matchMedia('(hover:hover) and (pointer:fine)').matches;
    const isMobile  = matchMedia('(hover:none) and (pointer:coarse)').matches;

    function setOpen(el, btn, open){
      el.classList.toggle('open', open);
      el.setAttribute('aria-hidden', open ? 'false' : 'true');
      btn?.setAttribute('aria-expanded', open ? 'true' : 'false');
    }

    // ============================================================
    // Drawer (men√∫)
    // ============================================================
    const $closeDrawer = qs('#closeDrawer');
    let drawerTimer = null;

    function openDrawer(){
      setOpen($drawer, $btnDrawer, true);
      if (isMobile){
        clearTimeout(drawerTimer);
        drawerTimer = setTimeout(()=> closeDrawer(), 5000);
      }
    }
    function closeDrawer(){
      setOpen($drawer, $btnDrawer, false);
      clearTimeout(drawerTimer);
    }

    $btnDrawer?.addEventListener('click', (e)=>{ e.stopPropagation(); ($drawer.classList.contains('open') ? closeDrawer() : openDrawer()); });
    $closeDrawer?.addEventListener('click', closeDrawer);

    if (isDesktop){
      $btnDrawer?.addEventListener('mouseenter', openDrawer);
      $drawer?.addEventListener('mouseleave', closeDrawer);
    }

    // Clic fuera cierra (pero no si haces clic en el interior)
    document.addEventListener('click', (e)=>{
      if ($drawer.classList.contains('open') && !e.composedPath().includes($drawer) && !e.composedPath().includes($btnDrawer)){
        closeDrawer();
      }
    }, {passive:true});

    // ============================================================
    // Cookies Consent
    // ============================================================
    const CONSENT_KEY = 'lucasConsent';
    const CONSENT_VERSION = 'v1-2025-09';
    const $consent = qs('#consent');
    const $allow = qs('#allow');
    const $deny  = qs('#deny');

    function getConsent(){
      try { return JSON.parse(localStorage.getItem(CONSENT_KEY) || 'null'); } catch(e){ return null; }
    }
    function setConsent(status){
      try {
        localStorage.setItem(CONSENT_KEY, JSON.stringify({ status, version: CONSENT_VERSION, ts: Date.now() }));
      } catch(e){}
    }
    function shouldShowBanner(saved){
      if(!saved) return true;
      if(saved.version !== CONSENT_VERSION) return true;
      return false;
    }
    function enableAnalytics(){
      // [SEO/TODO] Inyecta aqu√≠ tu script de anal√≠ticas si status === 'granted'
    }
    function initConsentBanner(){
      const saved = getConsent();
      if (shouldShowBanner(saved)) {
        $consent.style.display = 'block';
      } else {
        if (saved.status === 'granted') enableAnalytics();
      }
      $allow?.addEventListener('click', ()=>{
        setConsent('granted');
        $consent.style.display = 'none';
        enableAnalytics();
      });
      $deny ?.addEventListener('click', ()=>{
        setConsent('denied');
        $consent.style.display = 'none';
      });
      qs('#manageConsent')?.addEventListener('click',(e)=>{
        e.preventDefault();
        $consent.style.display = 'block';
      });
    }
    document.addEventListener('DOMContentLoaded', initConsentBanner);

    // ============================================================
    // Comentarios (Utterances on demand, sin fugas)
    // ============================================================
    const $closeComments = qs('#closeComments');
    const $commentsMount = qs('#commentsMount');
    let commentsLoaded = false;
    let inactivityTimer = null;
    let lastActivity = Date.now();

    function injectUtterances(){
      if (commentsLoaded) return;
      const s = document.createElement('script');
      s.src = 'https://utteranc.es/client.js';
      s.setAttribute('repo','LucasMolina707/IngLucasLearningHub.github.io'); // [SEO/INFO] Repo de issues
      s.setAttribute('issue-term','pathname');
      s.setAttribute('theme','icy-dark');
      s.setAttribute('crossorigin','anonymous');
      s.async = true;
      $commentsMount.appendChild(s);
      commentsLoaded = true;
    }

    function openComments(){
      setOpen($comments, $btnComments, true);
      injectUtterances();
      if (isDesktop) startInactivityWatcher();
    }
    function closeComments(){
      setOpen($comments, $btnComments, false);
      stopInactivityWatcher();
    }

    $btnComments?.addEventListener('click',(e)=>{
      e.stopPropagation();
      ($comments.classList.contains('open') ? closeComments() : openComments());
    });
    $closeComments?.addEventListener('click', closeComments);

    // Clic fuera cierra
    document.addEventListener('click', (e)=>{
      if ($comments.classList.contains('open') && !e.composedPath().includes($comments) && !e.composedPath().includes($btnComments)){
        closeComments();
      }
    }, {passive:true});

    // Inactividad (solo desktop)
    function startInactivityWatcher(){
      lastActivity = Date.now();
      if (inactivityTimer) return;
      inactivityTimer = setInterval(()=>{
        const idleMs = Date.now() - lastActivity;
        const hovering = $comments.matches(':hover');
        if($comments.classList.contains('open') && idleMs > 5000 && !hovering){
          closeComments();
        }
        if(!$comments.classList.contains('open')){
          stopInactivityWatcher();
        }
      }, 500);
    }
    function stopInactivityWatcher(){
      clearInterval(inactivityTimer);
      inactivityTimer = null;
    }
    ['mousemove','keydown','wheel'].forEach(evt=>{
      document.addEventListener(evt, ()=>{ lastActivity = Date.now(); }, {passive:true});
    });

    // ============================================================
    // Accesibilidad global
    // ============================================================
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        closeDrawer();
        closeComments();
      }
    });

    // ============================================================
    // Men√∫ autom√°tico desde /nav.json (con fallback GitHub API)
    // ============================================================
    (async function initAutoMenu(){
      const elPages = document.getElementById('nav-pages');
      const elProjects = document.getElementById('nav-projects');
      const CACHE_KEY = 'navjson-cache';
      const MAX_AGE = 24 * 60 * 60 * 1000;

      async function githubFallback(){
        try{
          const owner = 'LucasMolina707';
          const repo  = 'IngLucasLearningHub.github.io';
          const branch = 'main';
          const api = `https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`;
          const r = await fetch(api);
          const j = await r.json();
          const files = (j.tree || []).filter(x => x.type === 'blob' && x.path.endsWith('.html'));
          const skip = p => p.startsWith('templates/') || p.startsWith('multimedia/') || p.startsWith('galeria/') || p.startsWith('assets/') || p.includes('/draft');
          const pretty = s => s.replace(/\.html$/,'').split('/').pop().replace(/[-_]+/g,' ').replace(/\b\w/g, c => c.toUpperCase());
          const pages=[], projects=[];
          for (const f of files){
            if (skip(f.path)) continue;
            const item = { href: '/' + f.path, label: pretty(f.path) };
            if (f.path === 'index.html' || f.path === 'contacto.html' || f.path === 'politicas-privacidad.html' || !f.path.includes('/')) pages.push(item);
            else projects.push(item);
          }
          pages.sort((a,b)=> a.label.localeCompare(b.label,'es'));
          projects.sort((a,b)=> a.label.localeCompare(b.label,'es'));
          pages.sort((a,b)=> a.href.endsWith('/index.html')||a.href==='/index.html' ? -1 : b.href.endsWith('/index.html')||b.href==='/index.html' ? 1 : 0);
          return { pages, projects };
        }catch(err){
          console.warn('[menu] Fallback GitHub API fall√≥', err);
          return { pages:[], projects:[] };
        }
      }

      async function fetchNav(){
        try{
          const cached = localStorage.getItem(CACHE_KEY);
          if (cached){
            const obj = JSON.parse(cached);
            if (Date.now() - obj.ts < MAX_AGE && obj.data) return obj.data;
          }
          const res = await fetch('/nav.json', { cache: 'no-cache' });
          if (!res.ok) throw new Error('nav.json no disponible');
          const data = await res.json();
          localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data }));
          return data;
        }catch(e){
          console.warn('[menu] Usando fallback GitHub API');
          const data = await githubFallback();
          localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data }));
          return data;
        }
      }

      function renderList(container, list){
        if (!container) return;
        container.innerHTML = list.map(i => `<a href="${i.href}">${i.label}</a>`).join('');
      }

      try{
        const nav = await fetchNav();
        renderList(elPages, nav.pages || []);
        renderList(elProjects, nav.projects || []);
      }catch(e){
        console.error('[menu] error:', e);
      }
    })();
  </script>

  <!-- (No cargamos Utterances directo; lo inyectamos al abrir el panel) -->
  <!-- [SEO/INFO] Mant√©n /site.webmanifest y /browserconfig.xml para branding en dispositivos. -->
</body>
</html>
